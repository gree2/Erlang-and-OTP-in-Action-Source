<html>
<head><title>/Users/martinjlogan/book_workspace/code/chapter_11/_build/development/docs/coverage/tcp_interface/ti_app.html</title></head><body bgcolor=white text=black>
<pre>
File generated from /Users/martinjlogan/book_workspace/code/chapter_11/_build/development/apps/tcp_interface-0.1.0/ebin/../src/ti_app.erl by COVER 2010-04-13 at 16:47:43

****************************************************************************

        |  %%%----------------------------------------------------------------
        |  %%% @author Martin Logan &lt;martinjlogan@erlware.org&gt;
        |  %%% @doc
        |  %%%
        |  %%% @end
        |  %%% @copyright 2008 Martin Logan
        |  %%%----------------------------------------------------------------,
        |  -module(ti_app).
        |  
        |  -behaviour(application).
        |  
        |  %% Application callbacks
        |  -export([start/2, stop/1]).
        |  
        |  -define(DEFAULT_PORT, 1055).
        |  
        |  %%%===================================================================
        |  %%% Application callbacks
        |  %%%===================================================================
        |  
        |  %%--------------------------------------------------------------------
        |  %% @private
        |  %% @doc
        |  %% This function is called whenever an application is started using
        |  %% application:start/[1,2], and should start the processes of the
        |  %% application. If the application is structured according to the OTP
        |  %% design principles as a supervision tree, this means starting the
        |  %% top supervisor of the tree.
        |  %%
        |  %% @spec start(StartType, StartArgs) -&gt; {ok, Pid} |
        |  %%                                      {ok, Pid, State} |
        |  %%                                      {error, Reason}
        |  %%      StartType = normal | {takeover, Node} | {failover, Node}
        |  %%      StartArgs = term()
        |  %% @end
        |  %%--------------------------------------------------------------------
        |  start(_StartType, _StartArgs) -&gt;
<font color=red>     0..|      Port = </font>
        |  	case application:get_env(tcp_interface, port) of
<font color=red>     0..|  	    {ok, Port_} -&gt; Port_;</font>
<font color=red>     0..|  	    undefined   -&gt; ?DEFAULT_PORT</font>
        |  	end,
        |  
<font color=red>     0..|      {ok, LSock} = gen_tcp:listen(Port, [{active, true}, {reuseaddr, true}]),</font>
        |  
<font color=red>     0..|      case ti_sup:start_link(LSock) of</font>
        |          {ok, Pid} -&gt;
<font color=red>     0..|  	    ti_sup:start_child(),</font>
<font color=red>     0..|              {ok, Pid};</font>
        |          Error -&gt;
<font color=red>     0..|              Error</font>
        |      end.
        |  
        |  %%--------------------------------------------------------------------
        |  %% @private
        |  %% @doc
        |  %% This function is called whenever an application has stopped. It
        |  %% is intended to be the opposite of Module:start/2 and should do
        |  %% any necessary cleaning up. The return value is ignored.
        |  %%
        |  %% @spec stop(State) -&gt; void()
        |  %% @end
        |  %%--------------------------------------------------------------------
        |  stop(_State) -&gt;
<font color=red>     0..|      ok.</font>
        |  
        |  %%%===================================================================
        |  %%% Internal functions
        |  %%%===================================================================
        |  
        |  
</pre>
</body>
</html>
